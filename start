#!/usr/bin/env ruby

require "curses"
require_relative "lib/console"
require_relative "lib/player"
require_relative "lib/game_object"
require_relative "lib/scene"

Curses.raw
Curses.noecho
Curses.init_screen
Curses.refresh

# init
Console.start(21, 5)
scene = Scene.new
scene.set_player(Player.new, 1, 1)

scene.add_object(Pizza.new, 3, 3)

loop do
	scene.draw

	key = scene.getkey

	case key
	when 258
		scene.move_player(:down)
	when 259
		scene.move_player(:up)
	when 260
		scene.move_player(:left)
	when 261
		scene.move_player(:right)
	when "p"
		scene.pickup_item
	when "q"
		exit
	else
		Console.log(key.inspect, true)
	end
end

scene.move_object(0, 3, 3)
scene.draw

scene.getkey

Curses.close_screen
